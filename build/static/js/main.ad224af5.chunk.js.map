{"version":3,"sources":["pages/home/Home.module.css","components/Navbar.module.css","pages/login/Login.module.css","pages/signup/Signup.module.css","firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","hooks/useFirestore.js","pages/home/TransactionForm.js","pages/home/TransactionList.js","pages/home/Home.js","hooks/useCollection.js","pages/login/Login.js","hooks/useLogin.js","pages/signup/Signup.js","hooks/useSignup.js","components/Navbar.js","hooks/useLogout.js","App.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectFirestore","firestore","projectAuth","auth","timestamp","Timestamp","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","_ref","children","dispatch","useReducer","useEffect","unsub","onAuthStateChanged","console","log","_jsx","Provider","value","useAuthContext","context","useContext","Error","initialState","document","isPending","error","success","firestoreReducer","useFirestore","collection","response","isCancelled","setIsCancelled","useState","ref","dispatchIfNotCancelled","addDocument","async","createdAt","fromDate","Date","addedDocument","add","doc","err","message","deleteDocument","id","delete","TransactionForm","uid","name","setName","amount","setAmount","_jsxs","_Fragment","onSubmit","e","preventDefault","required","onChange","target","TransactionList","transactions","className","styles","map","transaction","onClick","Home","documents","useCollection","_query","_orderBy","setDocuments","setError","query","useRef","current","orderBy","where","unsubscribe","onSnapshot","snapshot","results","docs","forEach","push","data","container","content","sidebar","Login","email","setEmail","password","setPassword","login","useLogin","setIsPending","res","signInWithEmailAndPassword","disabled","Signup","displayName","setDisplayName","signup","useSignup","createUserWithEmailAndPassword","updateProfile","Navbar","logout","useLogout","signOut","navbar","title","Link","to","App","BrowserRouter","Switch","Route","exact","path","Redirect","ReactDOM","render","React","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ad224af5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__Zccma\",\"content\":\"Home_content__YBZ4t\",\"sidebar\":\"Home_sidebar__1WS8S\",\"transactions\":\"Home_transactions__1GGnf\",\"name\":\"Home_name__2rdzD\",\"amount\":\"Home_amount__219Kj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__2r5gk\",\"title\":\"Navbar_title__2dn_U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login-form\":\"Login_login-form__Cn_rC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signup-form\":\"Signup_signup-form__gN9TC\"};","import firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\n\r\n\r\nimport 'firebase/auth'\r\n\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyADoQnxJfOFGBLHx1LCLmbjQRqXb-caGP8\",\r\n    authDomain: \"mymoney-c68ba.firebaseapp.com\",\r\n    projectId: \"mymoney-c68ba\",\r\n    storageBucket: \"mymoney-c68ba.appspot.com\",\r\n    messagingSenderId: \"963524739999\",\r\n    appId: \"1:963524739999:web:dee0504ad7d4902fbcb3aa\"\r\n  };\r\n\r\n\r\n\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n  const projectFirestore= firebase.firestore();\r\n  const projectAuth = firebase.auth();\r\n  // timestamp\r\nconst timestamp = firebase.firestore.Timestamp\r\n\r\n  export{projectFirestore, projectAuth,timestamp}","import { createContext, useReducer, useEffect } from 'react'\r\nimport { projectAuth } from '../firebase/config'\r\n\r\nexport const AuthContext = createContext()\r\n\r\nexport const authReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'LOGIN':\r\n      return { ...state, user: action.payload }\r\n    case 'LOGOUT':\r\n      return { ...state, user: null }\r\n    case 'AUTH_IS_READY':\r\n      return { user: action.payload, authIsReady: true }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(authReducer, { \r\n    user: null,\r\n    authIsReady: false\r\n  })\r\n\r\n  useEffect(() => {\r\n    const unsub = projectAuth.onAuthStateChanged(user => {\r\n      dispatch({ type: 'AUTH_IS_READY', payload: user })\r\n      unsub()\r\n    })\r\n  }, [])\r\n\r\n  console.log('AuthContext state:', state)\r\n  \r\n  return (\r\n    <AuthContext.Provider value={{ ...state, dispatch }}>\r\n      { children }\r\n    </AuthContext.Provider>\r\n  )\r\n\r\n}","import { AuthContext } from \"../context/AuthContext\"\r\nimport { useContext } from \"react\"\r\n\r\nexport const useAuthContext = () => {\r\n  const context = useContext(AuthContext)\r\n\r\n  if(!context) {\r\n    throw Error('useAuthContext  Error')\r\n  }\r\n\r\n  return context\r\n}","import { useReducer, useEffect, useState } from \"react\"\r\nimport { projectFirestore, timestamp } from \"../firebase/config\"\r\n\r\nlet initialState = {\r\n  document: null,\r\n  isPending: false,\r\n  error: null,\r\n  success: null\r\n}\r\n\r\nconst firestoreReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'IS_PENDING':\r\n      return { isPending: true, document: null, success: false, error: null }\r\n    case 'ADDED_DOCUMENT':\r\n      return { isPending: false, document: action.payload, success: true, error: null }\r\n    case 'DELETED_DOCUMENT':\r\n      return { isPending: false, document: null, success: true, error: null }\r\n    case 'ERROR':\r\n      return { isPending: false, document: null, success: false, error: action.payload }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const useFirestore = (collection) => {\r\n  const [response, dispatch] = useReducer(firestoreReducer, initialState)\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n\r\n  // collection ref\r\n  const ref = projectFirestore.collection(collection)\r\n\r\n  // only dispatch is not cancelled\r\n  const dispatchIfNotCancelled = (action) => {\r\n    if (!isCancelled) {\r\n      dispatch(action)\r\n    }\r\n  }\r\n\r\n  // add a document\r\n  const addDocument = async (doc) => {\r\n    dispatch({ type: 'IS_PENDING' })\r\n\r\n    try {\r\n      const createdAt = timestamp.fromDate(new Date())\r\n      const addedDocument = await ref.add({ ...doc, createdAt })\r\n      dispatchIfNotCancelled({ type: 'ADDED_DOCUMENT', payload: addedDocument })\r\n    }\r\n    catch (err) {\r\n      dispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\r\n    }\r\n  }\r\n\r\n  // delete a document\r\n  const deleteDocument = async (id) => {\r\n    dispatch({ type: 'IS_PENDING' })\r\n\r\n    try {\r\n      await ref.doc(id).delete()\r\n      dispatchIfNotCancelled({ type: 'DELETED_DOCUMENT' })\r\n    }\r\n    catch (err) {\r\n      dispatchIfNotCancelled({ type: 'ERROR', payload: 'could not delete' })\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { addDocument, deleteDocument, response }\r\n\r\n}","import { useState, useEffect } from 'react'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\n\r\nexport default function TransactionForm({ uid }) {\r\n  const [name, setName] = useState('')\r\n  const [amount, setAmount] = useState('')\r\n  const { addDocument, response } = useFirestore('transactions')\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    addDocument({\r\n      uid, \r\n      name, \r\n      amount,\r\n    })\r\n  }\r\n\r\n  // reset the form fields\r\n  useEffect(() => {\r\n    if (response.success) {\r\n      setName('')\r\n      setAmount('')\r\n    }\r\n  }, [response.success])\r\n\r\n  return (\r\n    <>\r\n      <h3>Add a Transaction</h3>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <span>Transaction name:</span>\r\n          <input \r\n            type=\"text\"\r\n            required\r\n            onChange={(e) => setName(e.target.value)} \r\n            value={name} \r\n          />\r\n        </label>\r\n        <label>\r\n          <span>Amount ($):</span>\r\n          <input\r\n            type=\"number\"\r\n            required\r\n            onChange={(e) => setAmount(e.target.value)} \r\n            value={amount} \r\n          />\r\n        </label>\r\n        <button>Add Transaction</button>\r\n      </form>\r\n    </>\r\n  )\r\n}","import { useFirestore } from '../../hooks/useFirestore'\r\n\r\n// styles\r\nimport styles from './Home.module.css'\r\n\r\nexport default function TransactionList({ transactions }) {\r\n  const { deleteDocument ,response} = useFirestore('transactions')\r\n  console.log(response);\r\n\r\n  return (\r\n    <ul className={styles.transactions}>\r\n      {transactions.map((transaction) => (\r\n        <li key={transaction.id}>\r\n          <p className={styles.name}>{transaction.name}</p>\r\n          <p className={styles.amount}>${transaction.amount}</p>\r\n          <button onClick={() => deleteDocument(transaction.id)}>x</button>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  )\r\n}","import { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useCollection } from '../../hooks/useCollection'\r\n\r\n// styles\r\nimport styles from './Home.module.css'\r\n\r\n// components\r\nimport TransactionForm from './TransactionForm'\r\nimport TransactionList from './TransactionList'\r\n\r\nexport default function Home() {\r\n  const { user } = useAuthContext()\r\n  const { documents, error } = useCollection(\r\n    'transactions', [\"uid\", \"==\", user.uid],\r\n    ['createdAt','desc']\r\n  )\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.content}>\r\n        {error && <p>{error}</p>}\r\n        {documents && <TransactionList transactions={documents} />}\r\n      </div>\r\n      <div className={styles.sidebar}>\r\n        <TransactionForm uid={user.uid} />\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { useEffect, useState, useRef } from \"react\"\r\nimport { projectFirestore } from \"../firebase/config\"\r\n\r\nexport const useCollection = (collection, _query, _orderBy) => {\r\n  const [documents, setDocuments] = useState(null)\r\n  const [error, setError] = useState(null)\r\n\r\n  // if we don't use a ref --> infinite loop in useEffect\r\n  // _query is an array and is \"different\" on every function call\r\n  const query = useRef(_query).current\r\n  const orderBy = useRef(_orderBy).current\r\n\r\n  useEffect(() => {\r\n    let ref = projectFirestore.collection(collection)\r\n\r\n    if (query) {\r\n      ref = ref.where(...query)\r\n    }\r\n    if (orderBy) {\r\n      ref = ref.orderBy(...orderBy)\r\n    }\r\n\r\n    const unsubscribe = ref.onSnapshot(snapshot => {\r\n      let results = []\r\n      snapshot.docs.forEach(doc => {\r\n        console.log(doc)\r\n        results.push({...doc.data(), id: doc.id})\r\n      });\r\n      \r\n      // update state\r\n      setDocuments(results)\r\n      setError(null)\r\n    }, error => {\r\n      console.log(error)\r\n      setError('could not fetch the data')\r\n    })\r\n\r\n    // unsubscribe on unmount\r\n    return () => unsubscribe()\r\n\r\n  }, [collection, query, orderBy])\r\n\r\n  return { documents, error }\r\n}","import { useState } from 'react'\r\nimport { useLogin } from '../../hooks/useLogin'\r\n\r\n// styles\r\nimport styles from './Login.module.css'\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const { login, error, isPending } = useLogin()\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    login(email, password)\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles['login-form']}>\r\n      <h2>login</h2>\r\n      <label>\r\n        <span>email:</span>\r\n        <input \r\n          type=\"email\" \r\n          onChange={(e) => setEmail(e.target.value)} \r\n          value={email}\r\n        />\r\n      </label>\r\n      <label>\r\n        <span>password:</span>\r\n        <input \r\n          type=\"password\" \r\n          onChange={(e) => setPassword(e.target.value)} \r\n          value={password} \r\n        />\r\n      </label>\r\n      { !isPending && <button className=\"btn\">Login</button> }\r\n      { isPending && <button className=\"btn\" disabled>loading</button> }\r\n      { error && <p>{error}</p> }\r\n    </form>\r\n  )\r\n}","import { useState, useEffect } from 'react'\r\nimport { projectAuth } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useLogin = () => {\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [isPending, setIsPending] = useState(false)\r\n  const { dispatch } = useAuthContext()\r\n\r\n  const login = async (email,password) => {\r\n    setError(null)\r\n    setIsPending(true)\r\n  \r\n    try {\r\n      // login\r\n      const res = await projectAuth.signInWithEmailAndPassword(email, password)\r\n\r\n      // dispatch login action\r\n      dispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n      if (!isCancelled) {\r\n        setIsPending(false)\r\n        setError(null)\r\n      }\r\n    } \r\n    catch(err) {\r\n      if (!isCancelled) {\r\n        setError(err.message)\r\n        setIsPending(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { login, isPending, error }\r\n}","import { useState } from 'react'\r\nimport { useSignup } from '../../hooks/useSignup'\r\n\r\n// styles\r\nimport styles from './Signup.module.css'\r\n\r\nexport default function Signup() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [displayName, setDisplayName] = useState('')\r\n  const { signup, isPending, error } = useSignup()\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    signup(email, password, displayName)\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles['signup-form']}>\r\n      <h2>Sign up</h2>\r\n      <label>\r\n        <span>Email:</span>\r\n        <input \r\n          type=\"email\" \r\n          onChange={(e) => setEmail(e.target.value)} \r\n          value={email}\r\n        />\r\n      </label>\r\n      <label>\r\n        <span>Password:</span>\r\n        <input \r\n          type=\"password\" \r\n          onChange={(e) => setPassword(e.target.value)} \r\n          value={password} \r\n        />\r\n      </label>\r\n      <label>\r\n        <span>Profile Name:</span>\r\n        <input \r\n          type=\"text\" \r\n          onChange={(e) => setDisplayName(e.target.value)}\r\n          value={displayName}\r\n        />\r\n      </label>\r\n      { !isPending && <button className=\"btn\">Sign up</button> }\r\n      { isPending && <button className=\"btn\" disabled>Loading</button> }\r\n      { error && <p>{error}</p> }\r\n    </form>\r\n  )\r\n}","import { useState, useEffect } from 'react'\r\nimport { projectAuth } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useSignup = () => {\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [isPending, setIsPending] = useState(false)\r\n  const { dispatch } = useAuthContext()\r\n\r\n  const signup = async (email, password, displayName) => {\r\n    setError(null)\r\n    setIsPending(true)\r\n  \r\n    try {\r\n      // signup\r\n      const res = await projectAuth.createUserWithEmailAndPassword(email, password)\r\n\r\n      if (!res) {\r\n        throw new Error('Could not complete signup')\r\n      }\r\n\r\n      // add display name to user\r\n      await res.user.updateProfile({ displayName })\r\n\r\n      // dispatch login action\r\n      dispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n      if (!isCancelled) {\r\n        setIsPending(false)\r\n        setError(null)\r\n      }\r\n    } \r\n    catch(err) {\r\n      if (!isCancelled) {\r\n        setError(err.message)\r\n        setIsPending(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { signup, error, isPending }\r\n}","import { Link } from \"react-router-dom\"\r\nimport { useAuthContext } from \"../hooks/useAuthContext\"\r\nimport { useLogout } from '../hooks/useLogout'\r\n\r\n// styles\r\nimport styles from './Navbar.module.css'\r\n\r\nexport default function Navbar() {\r\n  const { logout } = useLogout()\r\n  const { user } = useAuthContext()\r\n\r\n  return (\r\n    <nav className={styles.navbar}>\r\n      <ul>\r\n        <li className={styles.title}>Money Tracker SMIT</li>\r\n        \r\n        {!user && (\r\n          <>\r\n            <li><Link to=\"/login\">Login</Link></li>\r\n            <li><Link to=\"/signup\">Signup</Link></li>\r\n          </>\r\n        )}\r\n\r\n        {user && (\r\n          <>\r\n            <li>hello, {user.displayName}</li>\r\n            <li>\r\n              <button className=\"btn\" onClick={logout}>Logout</button>\r\n            </li>\r\n          </>\r\n        )}\r\n      </ul>\r\n    </nav>\r\n  )\r\n}","import { useEffect, useState } from 'react'\r\nimport { projectAuth } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useLogout = () => {\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [isPending, setIsPending] = useState(false)\r\n  const { dispatch } = useAuthContext()\r\n  \r\n  const logout = async () => {\r\n    setError(null)\r\n    setIsPending(true)\r\n\r\n    try {\r\n      // sign the user out\r\n      await projectAuth.signOut()\r\n      \r\n      // dispatch logout action\r\n      dispatch({ type: 'LOGOUT' })\r\n\r\n      // update state\r\n      if (!isCancelled) {\r\n        setIsPending(false)\r\n        setError(null)\r\n      } \r\n    } \r\n    catch(err) {\r\n      if (!isCancelled) {\r\n        setError(err.message)\r\n        setIsPending(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { logout, error, isPending }\r\n}","import { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom'\nimport { useAuthContext } from './hooks/useAuthContext'\n\n// pages & components\nimport Home from './pages/home/Home'\nimport Login from './pages/login/Login'\nimport Signup from './pages/signup/Signup'\nimport Navbar from './components/Navbar'\n\nfunction App() {\n  const { authIsReady, user } = useAuthContext()\n\n  return (\n    <div className=\"App\">\n      {authIsReady && (\n        <BrowserRouter>\n          <Navbar />\n          <Switch>\n            <Route exact path=\"/\">\n              {!user && <Redirect to=\"/login\" />}\n              {user && <Home />}\n            </Route>\n            <Route path=\"/login\">\n              {user && <Redirect to=\"/\" />}\n              {!user && <Login />}\n            </Route>\n            <Route path=\"/signup\">\n              {user && user.displayName && <Redirect to=\"/\" />}\n              {!user && <Signup />}\n            </Route>\n          </Switch>\n        </BrowserRouter>\n      )}\n    </div>\n  );\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { AuthContextProvider } from './context/AuthContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}